<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ameterium - Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„ØªØ³Ø¬ÙŠÙ„</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container">
    <h1>ğŸŒŒ Ameterium</h1>
    <h3>ÙØ¬Ø± Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯</h3>

    <!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
    <div id="signupForm">
      <input type="email" id="signupEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
      <input type="password" id="signupPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      <button id="signupBtn">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>

      <p style="margin:15px 0;color:var(--text-dim);">Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø­Ø³Ø§Ø¨Ùƒ</p>

      <button id="googleSignup">Google</button>
      <button id="githubSignup">GitHub</button>
      <button id="facebookSignup">Facebook</button>
      <button id="twitterSignup">Twitter</button>

      <p class="switch">Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a id="showLogin" href="#">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a></p>
    </div>

    <!-- Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginForm" class="hidden">
      <input type="email" id="loginEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
      <input type="password" id="loginPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      <button id="loginBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>

      <p style="margin:15px 0;color:var(--text-dim);">Ø£Ùˆ</p>

      <button id="googleLogin">Google</button>
      <button id="githubLogin">GitHub</button>
      <button id="facebookLogin">Facebook</button>
      <button id="twitterLogin">Twitter</button>

      <p class="switch">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a id="showSignup" href="#">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</a></p>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      signInWithPopup,
      GoogleAuthProvider,
      GithubAuthProvider,
      FacebookAuthProvider,
      TwitterAuthProvider
    } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";

    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCUJDudVW_1lPh4UnvTY-5GT-att2uBJxs",
      authDomain: "ameterium.firebaseapp.com",
      projectId: "ameterium",
      storageBucket: "ameterium.firebasestorage.app",
      messagingSenderId: "650255548127",
      appId: "1:650255548127:web:c6f973b3a505a7a291736a",
      measurementId: "G-EKY4S15X6J"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const providers = {
      google: new GoogleAuthProvider(),
      github: new GithubAuthProvider(),
      facebook: new FacebookAuthProvider(),
      twitter: new TwitterAuthProvider()
    };

    const signupForm = document.getElementById('signupForm');
    const loginForm = document.getElementById('loginForm');
    const showLogin = document.getElementById('showLogin');
    const showSignup = document.getElementById('showSignup');

    showLogin.onclick = () => {
      signupForm.classList.add('hidden');
      loginForm.classList.remove('hidden');
    };
    showSignup.onclick = () => {
      loginForm.classList.add('hidden');
      signupForm.classList.remove('hidden');
    };

    // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
    document.getElementById('signupBtn').onclick = async () => {
      const email = document.getElementById('signupEmail').value;
      const pass = document.getElementById('signupPassword').value;
      try {
        await createUserWithEmailAndPassword(auth, email, pass);
        alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­ ğŸ‰");
        window.location.href = "game.html";
      } catch (err) {
        alert(err.message);
      }
    };

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    document.getElementById('loginBtn').onclick = async () => {
      const email = document.getElementById('loginEmail').value;
      const pass = document.getElementById('loginPassword').value;
      try {
        await signInWithEmailAndPassword(auth, email, pass);
        alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ğŸš€");
        window.location.href = "game.html";
      } catch (err) {
        alert(err.message);
      }
    };

    // ØªØ³Ø¬ÙŠÙ„ Ø¹Ø¨Ø± Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„
    const setupSocialButton = (id, provider) => {
      document.getElementById(id).onclick = async () => {
        try {
          await signInWithPopup(auth, provider);
          alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ âš¡");
          window.location.href = "game.html";
        } catch (err) {
          alert(err.message);
        }
      };
    };

    setupSocialButton("googleSignup", providers.google);
    setupSocialButton("githubSignup", providers.github);
    setupSocialButton("facebookSignup", providers.facebook);
    setupSocialButton("twitterSignup", providers.twitter);
    setupSocialButton("googleLogin", providers.google);
    setupSocialButton("githubLogin", providers.github);
    setupSocialButton("facebookLogin", providers.facebook);
    setupSocialButton("twitterLogin", providers.twitter);
  </script>

  <style>
  .hidden { display: none; }
  .switch { margin-top: 10px; font-size: 0.95rem; }
</style>

</body>
</html>
