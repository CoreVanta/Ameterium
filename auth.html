<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ameterium - الدخول والتسجيل</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container">
    <h1>🌌 Ameterium</h1>
    <h3>فجر الاقتصاد الجديد</h3>

    <!-- نموذج التسجيل -->
    <div id="signupForm">
      <input type="email" id="signupEmail" placeholder="البريد الإلكتروني">
      <input type="password" id="signupPassword" placeholder="كلمة المرور">
      <button id="signupBtn">إنشاء حساب</button>

      <p style="margin:15px 0;color:var(--text-dim);">أو استخدم حسابك</p>

      <button id="googleSignup">Google</button>
      <button id="githubSignup">GitHub</button>
      <button id="facebookSignup">Facebook</button>
      <button id="twitterSignup">Twitter</button>

      <p class="switch">لديك حساب؟ <a id="showLogin" href="#">تسجيل الدخول</a></p>
    </div>

    <!-- نموذج تسجيل الدخول -->
    <div id="loginForm" class="hidden">
      <input type="email" id="loginEmail" placeholder="البريد الإلكتروني">
      <input type="password" id="loginPassword" placeholder="كلمة المرور">
      <button id="loginBtn">تسجيل الدخول</button>

      <p style="margin:15px 0;color:var(--text-dim);">أو</p>

      <button id="googleLogin">Google</button>
      <button id="githubLogin">GitHub</button>
      <button id="facebookLogin">Facebook</button>
      <button id="twitterLogin">Twitter</button>

      <p class="switch">ليس لديك حساب؟ <a id="showSignup" href="#">إنشاء حساب جديد</a></p>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      signInWithPopup,
      GoogleAuthProvider,
      GithubAuthProvider,
      FacebookAuthProvider,
      TwitterAuthProvider
    } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";

    // إعدادات Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCUJDudVW_1lPh4UnvTY-5GT-att2uBJxs",
      authDomain: "ameterium.firebaseapp.com",
      projectId: "ameterium",
      storageBucket: "ameterium.firebasestorage.app",
      messagingSenderId: "650255548127",
      appId: "1:650255548127:web:c6f973b3a505a7a291736a",
      measurementId: "G-EKY4S15X6J"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const providers = {
      google: new GoogleAuthProvider(),
      github: new GithubAuthProvider(),
      facebook: new FacebookAuthProvider(),
      twitter: new TwitterAuthProvider()
    };

    const signupForm = document.getElementById('signupForm');
    const loginForm = document.getElementById('loginForm');
    const showLogin = document.getElementById('showLogin');
    const showSignup = document.getElementById('showSignup');

    showLogin.onclick = () => {
      signupForm.classList.add('hidden');
      loginForm.classList.remove('hidden');
    };
    showSignup.onclick = () => {
      loginForm.classList.add('hidden');
      signupForm.classList.remove('hidden');
    };

    // إنشاء حساب جديد
    document.getElementById('signupBtn').onclick = async () => {
      const email = document.getElementById('signupEmail').value;
      const pass = document.getElementById('signupPassword').value;
      try {
        await createUserWithEmailAndPassword(auth, email, pass);
        alert("تم إنشاء الحساب بنجاح 🎉");
        window.location.href = "game.html";
      } catch (err) {
        alert(err.message);
      }
    };

    // تسجيل الدخول
    document.getElementById('loginBtn').onclick = async () => {
      const email = document.getElementById('loginEmail').value;
      const pass = document.getElementById('loginPassword').value;
      try {
        await signInWithEmailAndPassword(auth, email, pass);
        alert("تم تسجيل الدخول 🚀");
        window.location.href = "game.html";
      } catch (err) {
        alert(err.message);
      }
    };

    // تسجيل عبر مواقع التواصل
    const setupSocialButton = (id, provider) => {
      document.getElementById(id).onclick = async () => {
        try {
          await signInWithPopup(auth, provider);
          alert("تم تسجيل الدخول بنجاح ⚡");
          window.location.href = "game.html";
        } catch (err) {
          alert(err.message);
        }
      };
    };

    setupSocialButton("googleSignup", providers.google);
    setupSocialButton("githubSignup", providers.github);
    setupSocialButton("facebookSignup", providers.facebook);
    setupSocialButton("twitterSignup", providers.twitter);
    setupSocialButton("googleLogin", providers.google);
    setupSocialButton("githubLogin", providers.github);
    setupSocialButton("facebookLogin", providers.facebook);
    setupSocialButton("twitterLogin", providers.twitter);
  </script>

  <style>
  .hidden { display: none; }
  .switch { margin-top: 10px; font-size: 0.95rem; }
</style>

</body>
</html>
